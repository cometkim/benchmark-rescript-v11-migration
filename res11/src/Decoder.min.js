"use strict";(()=>{var B=(g=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(g,{get:(v,a)=>(typeof require<"u"?require:v)[a]}):g)(function(g){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+g+'" is not supported')});var $=(g,v)=>()=>(v||g((v={exports:{}}).exports,v),v.exports);var ne=$(ee=>{ee.timestampDecoder={type:-1,decode(g,v){let a=new DataView(g.buffer);switch(v){case 4:{let d=a.getUint32(0,!1)/1e3|0;return new Date(d)}case 8:{let G=a.getUint32(0),d=a.getUint32(4),t=G/4,c=((G&3)*2**32+d)*1e3+Math.round(t/1e6);return new Date(c)}case 12:throw new Error("timestamp96 is not supported yet");default:throw new Error(`invalid byteLength ${v}`)}}}});var Ne=$(w=>{var T=B("rescript/lib/js/js_exn.js"),l=B("rescript/lib/js/js_dict.js"),Ve=B("rescript/lib/js/pervasives.js"),je=ne(),ie=function(g,v){let a=0,G=v.length,d=[],t="";for(;a<G;){let f=v[a++];if(!(f&128))d.push(f);else if((f&224)===192){let c=v[a++]&63;d.push((f&31)<<6|c)}else if((f&240)===224){let c=v[a++]&63,U=v[a++]&63;d.push((f&31)<<12|c<<6|U)}else if((f&248)===240){let c=v[a++]&63,U=v[a++]&63,E=v[a++]&63,D=(f&7)<<18|c<<12|U<<6|E;D>65535&&(D-=65536,d.push(D>>>10&1023|55296),D=56320|D&1023),d.push(D)}else d.push(f);d.length>=4096&&(t+=String.fromCharCode(...d),d.length=0)}return d.length>0&&(t+=String.fromCharCode(...d)),t},Pe={decode2:ie},te=function(g){let v=1;for(let a=7;a>=0;a--){let G=(g[a]^255)+v;g[a]=G&255,v=G>>8}},p=je.timestampDecoder;function ze(g){var v=new TextDecoder,a=l.fromArray(g);return{textDecoder:v,extensions:a}}function Ke(g,v){var a=g.extensions,G=g.textDecoder,d=v.slice(),t=new DataView(d.buffer),f=function(D,n,i){for(;;){var o=i,A=n;if(typeof A!="object"){var x=t.getUint8(o),e=o+1|0;if(x<128){i=e,n={TAG:"Done",_0:x};continue}if(x<144){var ae=x&15;i=e,n={TAG:"DecodeMap",_0:ae,_1:{}};continue}if(x<160){var C=x&15;i=e,n={TAG:"DecodeArray",_0:C,_1:new Array(C)};continue}if(x<192){var ve=x&31;i=e,n={TAG:"DecodeString",_0:ve};continue}switch(x){case 192:i=e,n={TAG:"Done",_0:null};continue;case 193:break;case 194:i=e,n={TAG:"Done",_0:!1};continue;case 195:i=e,n={TAG:"Done",_0:!0};continue;case 196:var de=t.getUint8(e);i=e+1|0,n={TAG:"DecodeBinary",_0:de};continue;case 197:var ge=t.getUint16(e);i=e+2|0,n={TAG:"DecodeBinary",_0:ge};continue;case 198:var fe=t.getUint32(e);i=e+4|0,n={TAG:"DecodeBinary",_0:fe};continue;case 199:var H=t.getUint8(e),h=t.getInt8(e+1|0);if(h===p.type){i=e+2|0,n={TAG:"DecodeExt",_0:H,_1:p};continue}var b=l.get(a,String(h));if(b===void 0)return T.raiseError("Unknown extension type "+String(h));i=e+2|0,n={TAG:"DecodeExt",_0:H,_1:b};continue;case 200:var De=t.getUint16(e),F=t.getInt8(e+2|0),J=l.get(a,String(F));if(J===void 0)return T.raiseError("Unknown extension type "+String(F));i=e+2|0,n={TAG:"DecodeExt",_0:De,_1:J};continue;case 201:var oe=t.getUint32(e),L=t.getInt8(e+4|0),V=l.get(a,String(L));if(V===void 0)return T.raiseError("Unknown extension type "+String(L));i=e+4|0,n={TAG:"DecodeExt",_0:oe,_1:V};continue;case 202:var xe=t.getFloat32(e);i=e+4|0,n={TAG:"Done",_0:xe};continue;case 203:var Ae=t.getFloat64(e);i=e+8|0,n={TAG:"Done",_0:Ae};continue;case 204:var Te=t.getUint8(e);i=e+1|0,n={TAG:"Done",_0:Te};continue;case 205:var Ge=t.getUint16(e);i=e+2|0,n={TAG:"Done",_0:Ge};continue;case 206:var ce=t.getUint32(e);i=e+4|0,n={TAG:"Done",_0:ce};continue;case 207:var le=t.getUint32(e),pe=t.getUint32(e+4|0),Ue=le*Math.pow(256,4)+pe;i=e+8|0,n={TAG:"Done",_0:Ue};continue;case 208:var we=t.getInt8(e);i=e+1|0,n={TAG:"Done",_0:we};continue;case 209:var Ee=t.getInt16(e);i=e+2|0,n={TAG:"Done",_0:Ee};continue;case 210:var Se=t.getInt32(e);i=e+4|0,n={TAG:"Done",_0:Se};continue;case 211:te(D.subarray(e,e+9|0));var he=t.getUint32(e),me=t.getUint32(e+4|0),ye=he*Math.pow(256,4)+me;i=e+8|0,n={TAG:"Done",_0:0-ye};continue;case 212:var j=t.getInt8(e),P=l.get(a,String(j));if(P===void 0)return T.raiseError("Unknown extension type "+String(j));i=e+1|0,n={TAG:"DecodeExt",_0:1,_1:P};continue;case 213:var z=t.getInt8(e),K=l.get(a,String(z));if(K===void 0)return T.raiseError("Unknown extension type "+String(z));i=e+1|0,n={TAG:"DecodeExt",_0:2,_1:K};continue;case 214:var m=t.getInt8(e);if(m===p.type){i=e+1|0,n={TAG:"DecodeExt",_0:4,_1:p};continue}var N=l.get(a,String(m));if(N===void 0)return T.raiseError("Unknown extension type "+String(m));i=e+1|0,n={TAG:"DecodeExt",_0:4,_1:N};continue;case 215:var y=t.getInt8(e);if(y===p.type){i=e+1|0,n={TAG:"DecodeExt",_0:8,_1:p};continue}var O=l.get(a,String(y));if(O===void 0)return T.raiseError("Unknown extension type "+String(y));i=e+1|0,n={TAG:"DecodeExt",_0:8,_1:O};continue;case 216:var Q=t.getInt8(e),R=l.get(a,String(Q));if(R===void 0)return T.raiseError("Unknown extension type "+String(Q));i=e+1|0,n={TAG:"DecodeExt",_0:16,_1:R};continue;case 217:var Ie=t.getUint8(e);i=e+1|0,n={TAG:"DecodeString",_0:Ie};continue;case 218:var ke=t.getUint16(e);i=e+2|0,n={TAG:"DecodeString",_0:ke};continue;case 219:var Me=t.getUint32(e);i=e+4|0,n={TAG:"DecodeString",_0:Me};continue;case 220:var W=t.getUint16(e);i=e+2|0,n={TAG:"DecodeArray",_0:W,_1:new Array(W)};continue;case 221:var X=t.getUint32(e);i=e+4|0,n={TAG:"DecodeArray",_0:X,_1:new Array(X)};continue;case 222:var qe=t.getUint16(e);i=e+2|0,n={TAG:"DecodeMap",_0:qe,_1:{}};continue;case 223:var Be=t.getUint32(e);i=e+4|0,n={TAG:"DecodeMap",_0:Be,_1:{}};continue;default:}if(x>=256)return T.raiseError("Unknown header "+String(x));var Ce=Ve.lnot(x^255);i=e,n={TAG:"Done",_0:Ce};continue}switch(A.TAG){case"DecodeString":var Y=A._0,He=D.subarray(o,o+Y|0),be=ie(G,He);i=o+Y|0,n={TAG:"Done",_0:be};continue;case"DecodeArray":var S=A._1,I=A._0;if(I!==0){var Z=f(D,"ExpectHeader",o),Fe=S.length-I|0;S[Fe]=Z[0],i=Z[1],n={TAG:"DecodeArray",_0:I-1|0,_1:S};continue}n={TAG:"Done",_0:S};continue;case"DecodeMap":var k=A._1,r=A._0;if(r!==0){var _=f(D,"ExpectHeader",o),M=_[0];if(typeof M!="string")return T.raiseError("Unexpected key type. Expected string, but got "+typeof M);var u=f(D,"ExpectHeader",_[1]);k[M]=u[0],i=u[1],n={TAG:"DecodeMap",_0:r-1|0,_1:k};continue}n={TAG:"Done",_0:k};continue;case"DecodeBinary":var s=A._0,Je=D.slice(o,o+s|0);i=o+s|0,n={TAG:"Done",_0:Je};continue;case"DecodeExt":var q=A._0,Le=D.slice(o,o+q|0);i=o+q|0,n={TAG:"Done",_0:A._1.decode(Le,q)};continue;case"Done":return[A._0,o]}}},c=f(d,"ExpectHeader",0),U=c[1],E=d.length;return E!==U&&T.raiseError("Invalid input length, expected "+String(E)+", but got "+String(U)),c[0]}w.$$TextDecoder=Pe;w.flip64=te;w.timestampExt=p;w.make=ze;w.decode=Ke});Ne();})();
